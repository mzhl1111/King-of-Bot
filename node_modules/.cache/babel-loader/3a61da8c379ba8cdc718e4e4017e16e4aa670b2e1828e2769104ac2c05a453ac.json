{"ast":null,"code":"import $ from \"jquery\";\nexport default {\n  state: {\n    id: \"\",\n    username: \"\",\n    photo: \"\",\n    token: \"\",\n    logged_in: false,\n    pulling\n  },\n  getters: {},\n  mutations: {\n    updateUser(state, user) {\n      state.id = user.id;\n      state.username = user.username;\n      state.photo = user.photo;\n      state.logged_in = user.logged_in;\n    },\n    updateToken(state, token) {\n      state.token = token;\n    },\n    logout(state) {\n      state.id = \"\";\n      state.username = \"\";\n      state.photo = \"\";\n      state.token = \"\";\n      state.logged_in = \"\";\n    }\n  },\n  actions: {\n    login(context, data) {\n      $.ajax({\n        url: \"http://localhost:8888/user/account/token/\",\n        type: \"post\",\n        data: {\n          username: data.username,\n          password: data.password\n        },\n        success(resp) {\n          if (resp.error_message === \"success\") {\n            context.commit(\"updateToken\", resp.token);\n            localStorage.setItem(\"jwt_token\", resp.token);\n            data.success(resp);\n          } else {\n            data.error(resp);\n          }\n        },\n        error(resp) {\n          data.error(resp);\n        }\n      });\n    },\n    getInfo(context, data) {\n      $.ajax({\n        url: \"http://localhost:8888/user/account/info/\",\n        type: \"get\",\n        headers: {\n          Authorization: \"Bearer \" + context.state.token\n        },\n        success(resp) {\n          if (resp.error_message === \"success\") {\n            context.commit(\"updateUser\", {\n              ...resp,\n              logged_in: true\n            });\n            data.success(resp);\n          } else {\n            data.error(resp);\n          }\n        },\n        error(resp) {\n          data.error(resp);\n        }\n      });\n    },\n    logout(context) {\n      localStorage.removeItem(\"jwt_token\");\n      context.commit(\"logout\");\n    }\n  },\n  modules: {}\n};","map":{"version":3,"names":["$","state","id","username","photo","token","logged_in","pulling","getters","mutations","updateUser","user","updateToken","logout","actions","login","context","data","ajax","url","type","password","success","resp","error_message","commit","localStorage","setItem","error","getInfo","headers","Authorization","removeItem","modules"],"sources":["/Users/muzhouliu/Desktop/acwing/kob/web/src/store/user.js"],"sourcesContent":["import $ from \"jquery\"\n\nexport default {\n    state: {\n        id: \"\",\n        username: \"\",\n        photo: \"\",\n        token: \"\",\n        logged_in : false,\n        pulling\n    },\n    getters: {\n\n    },\n\n    mutations: {\n        updateUser(state, user) {\n            state.id = user.id;\n            state.username = user.username;\n            state.photo = user.photo;\n            state.logged_in = user.logged_in;\n        },\n        updateToken(state, token) {\n            state.token = token;\n        },\n        logout(state) {\n            state.id = \"\";\n            state.username = \"\";\n            state.photo = \"\";\n            state.token = \"\";\n            state.logged_in = \"\";\n        }\n    },\n    actions: {\n        login(context, data) {\n            $.ajax({\n                url: \"http://localhost:8888/user/account/token/\",\n                type: \"post\",\n                data: {\n                    username: data.username,\n                    password: data.password,\n                },\n                success(resp) {\n                    if(resp.error_message === \"success\"){\n                        context.commit(\"updateToken\", resp.token);\n                        localStorage.setItem(\"jwt_token\", resp.token)\n                        data.success(resp);\n                    } else {\n                        data.error(resp);\n                    }\n                },\n                error(resp) {\n                    data.error(resp);\n                }\n            })\n        },\n        getInfo(context, data) {\n            $.ajax({\n                url: \"http://localhost:8888/user/account/info/\",\n                type: \"get\",\n                headers: {\n                    Authorization: \"Bearer \" + context.state.token,\n                },\n                success(resp){\n                    if (resp.error_message === \"success\") {\n                        context.commit(\"updateUser\", {\n                            ...resp,\n                            logged_in: true,\n                        })\n                        data.success(resp);\n                    } else {\n                        data.error(resp);\n                    }\n                },\n                error(resp){\n                    data.error(resp);\n                }\n            })\n        },\n        logout(context) {\n            localStorage.removeItem(\"jwt_token\");\n            context.commit(\"logout\");\n\n        },\n    },\n    modules: {\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}