{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { GameObject } from \"./GameObject\";\nimport { Wall } from \"./wall\";\nexport class GameMap extends GameObject {\n  constructor(ctx, parent) {\n    super();\n    this.ctx = ctx;\n    this.parent = parent;\n    this.L = 0;\n    this.rows = 13;\n    this.cols = 13;\n    this.walls = [];\n    this.inner_wall_count = 10;\n  }\n  create_walls() {\n    const g = [];\n    for (let r = 0; r < this.rows; r++) {\n      g[r] = [];\n      for (let c = 0; c < this.cols; c++) {\n        g[r][c] = false;\n      }\n    }\n\n    //add walls for surroundings \n\n    for (let r = 0; r < this.rows; r++) {\n      g[r][0] = g[r][this.cols - 1] = true;\n    }\n    for (let c = 0; c < this.cols; c++) {\n      g[0][c] = g[this.rows - 1][c] = true;\n    }\n\n    //add random walls\n    for (let i = 0; i < this.inner_wall_count; i++) {\n      for (let j = 0; j < 1000; j++) {\n        let r = parseInt(Math.random() * this.rows);\n        let c = parseInt(Math.random() * this.cols);\n        if (g[r][c] || g[c][r]) continue;\n        if (r == this.rows - 2 && c == 1 || r == 1 && c == this.cols - 2) continue;\n        g[r][c] = g[c][r] = true;\n        console.log(i, r, c);\n        break;\n      }\n    }\n    const copy_g = Json.parse(JSON.stringify(g));\n    if (!this.check_connectivity(g, this.rows - 2, 1, 1, this.cols - 2)) return false;\n    for (let r = 0; r < this.rows; r++) {\n      for (let c = 0; c < this.cols; c++) {\n        if (g[r][c]) {\n          this.walls.push(new Wall(r, c, this));\n        }\n      }\n    }\n    return true;\n  }\n  start() {\n    for (let i = 0; i < 1000; i++) {\n      if (this.create_walls()) break;\n    }\n  }\n  update_size() {\n    this.L = parseInt(Math.min(this.parent.clientWidth / this.cols, this.parent.clientHeight / this.rows));\n    this.ctx.canvas.width = this.L * this.cols;\n    this.ctx.canvas.height = this.L * this.rows;\n  }\n  update() {\n    this.update_size();\n    this.render();\n  }\n  render() {\n    const color_even = \"#82EAFD\",\n      color_odd = \"#02BADA\";\n    for (let r = 0; r < this.rows; r++) {\n      for (let c = 0; c < this.cols; c++) {\n        if ((r + c) % 2 == 0) {\n          this.ctx.fillStyle = color_even;\n        } else {\n          this.ctx.fillStyle = color_odd;\n        }\n        this.ctx.fillRect(c * this.L, r * this.L, this.L, this.L);\n      }\n    }\n  }\n}","map":{"version":3,"names":["GameObject","Wall","GameMap","constructor","ctx","parent","L","rows","cols","walls","inner_wall_count","create_walls","g","r","c","i","j","parseInt","Math","random","console","log","copy_g","Json","parse","JSON","stringify","check_connectivity","push","start","update_size","min","clientWidth","clientHeight","canvas","width","height","update","render","color_even","color_odd","fillStyle","fillRect"],"sources":["/Users/muzhouliu/Desktop/acwing/kob/web/src/assets/scripts/GameMap.js"],"sourcesContent":["import { GameObject } from \"./GameObject\";\nimport { Wall } from \"./wall\";\n\nexport class GameMap extends GameObject {\n    constructor(ctx, parent) {\n        super();\n\n\n        this.ctx = ctx;\n        this.parent = parent;\n\n        this.L = 0;\n\n        this.rows = 13;\n        this.cols = 13;\n\n        this.walls = [];\n        this.inner_wall_count = 10;\n    }\n\n\n    create_walls() {\n        const g = [];\n        for (let r = 0; r < this.rows; r++) {\n            g[r] = [];\n            for (let c = 0; c < this.cols; c++) {\n                g[r][c] = false;\n            }\n        }\n\n        //add walls for surroundings \n\n        for (let r = 0; r < this.rows; r++) {\n            g[r][0] = g[r][this.cols - 1] = true;\n        }\n\n        for (let c = 0; c < this.cols; c++) {\n            g[0][c] = g[this.rows - 1][c] = true;\n        }\n\n        //add random walls\n        for(let i = 0; i < this.inner_wall_count; i++) {\n            for (let j = 0; j < 1000; j++) {\n                let r = parseInt(Math.random() * this.rows);\n                let c = parseInt(Math.random() * this.cols);\n                if(g[r][c] || g[c][r]) continue;\n                if(r == this.rows - 2 && c == 1 || r == 1 && c == this.cols-2) continue;\n\n                g[r][c] = g[c][r] = true;\n                console.log(i, r, c)\n                break;\n            }\n        }\n\n        const copy_g = Json.parse(JSON.stringify(g));\n        if(!this.check_connectivity(g, this.rows-2, 1, 1, this.cols -2)) return false;\n\n        for(let r = 0; r < this.rows; r++) {\n            for(let c = 0; c < this.cols; c++) {\n                if(g[r][c]) {\n                    this.walls.push(new Wall(r, c, this))\n                }\n            }\n        }\n\n        return true;\n    }\n\n\n    start () {\n        for(let i =0; i < 1000; i++){\n            if (this.create_walls()) break;\n        }\n\n    }\n\n    update_size() {\n        this.L = parseInt(Math.min(this.parent.clientWidth / this.cols, this.parent.clientHeight / this.rows));\n        this.ctx.canvas.width = this.L * this.cols;\n        this.ctx.canvas.height = this.L * this.rows;\n    }\n\n    update() {\n        this.update_size();\n        this.render();\n    }\n\n    render() {\n        const color_even = \"#82EAFD\", color_odd = \"#02BADA\";\n        for (let r = 0; r < this.rows; r++){\n            for (let c = 0; c < this.cols; c++) {\n                if ((r + c) % 2 == 0) {\n                    this.ctx.fillStyle = color_even;\n                } else {\n                    this.ctx.fillStyle = color_odd;\n                }\n                this.ctx.fillRect(c * this.L, r * this.L, this.L, this.L)\n            }\n        }\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}