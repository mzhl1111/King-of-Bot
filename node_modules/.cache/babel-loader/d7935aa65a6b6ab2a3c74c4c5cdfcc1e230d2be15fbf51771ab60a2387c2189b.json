{"ast":null,"code":"import PlayGround from \"@/components/PlayGround.vue\";\nimport MatchGround from \"@/components/MatchGround.vue\";\nimport { onMounted, onUnmounted } from \"vue\";\nimport { useStore } from \"vuex\";\nexport default {\n  components: {\n    PlayGround,\n    Mat\n  },\n  setup() {\n    const store = useStore();\n    const socketUrl = `ws://localhost:8888/websocket/${store.state.user.token}`;\n    let socket = null;\n    onMounted(() => {\n      socket = new WebSocket(socketUrl);\n      socket.onopen = () => {\n        console.log(\"Connected\");\n      };\n      socket.onmessage = msg => {\n        const data = JSON.parse(msg.data);\n        console.log(data);\n      };\n      socket.onclose = () => {\n        console.log(\"Connection closed\");\n      };\n    });\n    onUnmounted(() => {\n      socket.close();\n    });\n  }\n};","map":{"version":3,"names":["PlayGround","MatchGround","onMounted","onUnmounted","useStore","components","Mat","setup","store","socketUrl","state","user","token","socket","WebSocket","onopen","console","log","onmessage","msg","data","JSON","parse","onclose","close"],"sources":["/Users/muzhouliu/Desktop/acwing/kob/web/src/views/pk/pkIndexView.vue"],"sourcesContent":["<template>\n    <PlayGround v-if=\"$store.state.pk.status === 'Playing'\"></PlayGround>\n    <MatchGround v-if=\"$store.state.pk.status === 'Matching'\"></MatchGround>\n</template>\n\n\n<script>\nimport PlayGround from \"@/components/PlayGround.vue\"\nimport MatchGround from \"@/components/MatchGround.vue\"\nimport { onMounted, onUnmounted } from \"vue\"\nimport { useStore } from \"vuex\";\n\nexport default {\n    components: {\n        PlayGround,\n        Mat\n    },\n    setup() {\n        const store = useStore();\n        const socketUrl = `ws://localhost:8888/websocket/${store.state.user.token}`;\n\n        let socket = null;\n        onMounted(() => {\n            socket = new WebSocket(socketUrl);\n\n            socket.onopen = () => {\n                console.log(\"Connected\");\n            }\n\n            socket.onmessage = msg => {\n                const data = JSON.parse(msg.data);\n                console.log(data);\n            }\n\n            socket.onclose = () => {\n                console.log(\"Connection closed\");\n            }\n\n        });\n\n        onUnmounted(() => {\n            socket.close();\n        })\n    }\n\n}\n</script>\n\n\n<style scoped>\n</style>"],"mappings":"AAOA,OAAOA,UAAS,MAAO,6BAA4B;AACnD,OAAOC,WAAU,MAAO,8BAA6B;AACrD,SAASC,SAAS,EAAEC,WAAU,QAAS,KAAI;AAC3C,SAASC,QAAO,QAAS,MAAM;AAE/B,eAAe;EACXC,UAAU,EAAE;IACRL,UAAU;IACVM;EACJ,CAAC;EACDC,KAAKA,CAAA,EAAG;IACJ,MAAMC,KAAI,GAAIJ,QAAQ,CAAC,CAAC;IACxB,MAAMK,SAAQ,GAAK,iCAAgCD,KAAK,CAACE,KAAK,CAACC,IAAI,CAACC,KAAM,EAAC;IAE3E,IAAIC,MAAK,GAAI,IAAI;IACjBX,SAAS,CAAC,MAAM;MACZW,MAAK,GAAI,IAAIC,SAAS,CAACL,SAAS,CAAC;MAEjCI,MAAM,CAACE,MAAK,GAAI,MAAM;QAClBC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;MAC5B;MAEAJ,MAAM,CAACK,SAAQ,GAAIC,GAAE,IAAK;QACtB,MAAMC,IAAG,GAAIC,IAAI,CAACC,KAAK,CAACH,GAAG,CAACC,IAAI,CAAC;QACjCJ,OAAO,CAACC,GAAG,CAACG,IAAI,CAAC;MACrB;MAEAP,MAAM,CAACU,OAAM,GAAI,MAAM;QACnBP,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;MACpC;IAEJ,CAAC,CAAC;IAEFd,WAAW,CAAC,MAAM;MACdU,MAAM,CAACW,KAAK,CAAC,CAAC;IAClB,CAAC;EACL;AAEJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}