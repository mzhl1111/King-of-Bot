{"ast":null,"code":"import { ref, reactive } from \"vue\";\nimport $ from \"jquery\";\nimport { useStore } from \"vuex\";\nimport { Modal } from \"bootstrap/dist/js/bootstrap\";\nexport default {\n  setup() {\n    const store = useStore();\n    let bots = ref([]);\n    const bot_to_add = reactive({\n      botName: \"\",\n      description: \"\",\n      content: \"\",\n      error_message: \"\"\n    });\n    const refresh_bots = () => {\n      $.ajax({\n        url: \"http://localhost:8888/user/bot/getall/\",\n        type: \"GET\",\n        data: {},\n        headers: {\n          Authorization: \"Bearer \" + store.state.user.token\n        },\n        success(resp) {\n          bots.value = resp;\n        },\n        error(resp) {\n          console.log(resp);\n        }\n      });\n    };\n    refresh_bots();\n    const add_new_bot = () => {\n      bot_to_add.error_message = \"\";\n      $.ajax({\n        url: \"http://localhost:8888/user/bot/add/\",\n        type: \"POST\",\n        data: {\n          botName: bot_to_add.botName,\n          description: bot_to_add.description,\n          content: bot_to_add.content\n        },\n        headers: {\n          Authorization: \"Bearer \" + store.state.user.token\n        },\n        success(resp) {\n          if (resp.error_message === \"success\") {\n            refresh_bots();\n            bot_to_add.botName = \"\";\n            bot_to_add.description = \"\";\n            bot_to_add.content = \"\";\n            Modal.getInstance(\"#add-bot-btn\").hide();\n          } else {\n            bot_to_add.error_message = resp.error_message;\n          }\n        },\n        error(resp) {\n          console.log(resp);\n        }\n      });\n    };\n    const remove_bot = bot => {\n      $.ajax({\n        url: \"http://localhost:8888/user/bot/remove/\",\n        type: \"POST\",\n        data: {\n          botId: bot.id\n        },\n        headers: {\n          Authorization: \"Bearer \" + store.state.user.token\n        },\n        success(resp) {\n          if (resp.error_message === \"success\") {\n            refresh_bots();\n          }\n        },\n        error(resp) {\n          console.log(resp);\n        }\n      });\n    };\n    const modify_bot = bot => {\n      bot_to_add.error_message = \"\";\n      $.ajax({\n        url: \"http://localhost:8888/user/bot/add/\",\n        type: \"POST\",\n        data: {\n          botId: bot.id,\n          botName: bot_to_add.botName,\n          description: bot_to_add.description,\n          content: bot_to_add.content\n        },\n        headers: {\n          Authorization: \"Bearer \" + store.state.user.token\n        },\n        success(resp) {\n          if (resp.error_message === \"success\") {\n            refresh_bots();\n            bot_to_add.botName = \"\";\n            bot_to_add.description = \"\";\n            bot_to_add.content = \"\";\n            Modal.getInstance(\"#modify-bot-btn\").hide();\n          } else {\n            bot_to_add.error_message = resp.error_message;\n          }\n        },\n        error(resp) {\n          console.log(resp);\n        }\n      });\n    };\n    return {\n      bots,\n      bot_to_add,\n      add_new_bot,\n      remove_bot,\n      modify_bot\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","$","useStore","Modal","setup","store","bots","bot_to_add","botName","description","content","error_message","refresh_bots","ajax","url","type","data","headers","Authorization","state","user","token","success","resp","value","error","console","log","add_new_bot","getInstance","hide","remove_bot","bot","botId","id","modify_bot"],"sources":["/Users/muzhouliu/Desktop/acwing/kob/web/src/views/user/bots/userBotIndexView.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-3\">\n          <div class=\"card\" style=\"margin-top: 20px;\">\n            <div class=\"card-body\">\n              <img :src=\"$store.state.user.photo\" alt=\"\" style=\"width: 100%;\">\n            </div>\n          </div>\n        </div>\n        <div class=\"col-9\">\n          <div class=\"card\" style=\"margin-top: 20px;\">\n            <div class=\"cardheader\">\n              <span style=\"font-size: 130%;\"> My Bots</span>\n              <button type=\"button\" class=\"btn btn-primary float-end\" data-bs-toggle=\"modal\" data-bs-target=\"#add-bot-btn\">+ New Bot</button>\n              <!-- Modal -->\n              <div class=\"modal modal-xl modal-dialog-scrollable\" id=\"add-bot-btn\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n                <div class=\"modal-dialog\">\n                  <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                      <h1 class=\"modal-title fs-5\" id=\"exampleModalLabel\">Create new bot</h1>\n                      <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                      <!-- form -->\n                      <div class=\"mb-3\">\n                        <label for=\"add-bot-name\" class=\"form-label\">Bot name</label>\n                        <input v-model=\"bot_to_add.botName\" type=\"text\" class=\"form-control\" id=\"exampleFormControlInput1\" placeholder=\"Please input bot name\">\n                      </div>\n                      <div class=\"mb-3\">\n                        <label for=\"add-bot-descrption\" class=\"form-label\">Description</label>\n                        <textarea v-model=\"bot_to_add.description\" class=\"form-control\" id=\"exampleFormControlTextarea1\" rows=\"3\" placeholder=\"Please bot's description\"></textarea>\n                      </div>\n                      <div class=\"mb-3\">\n                        <label for=\"add-bot-descrption\" class=\"form-label\">Code</label>\n                        <textarea v-model=\"bot_to_add.content\" class=\"form-control\" id=\"exampleFormControlTextarea1\" rows=\"10\" placeholder=\"Please put your code here\"></textarea>\n                      </div>\n                    </div>\n                    <div class=\"modal-footer\">\n                      <div class=\"error-message\">{{ bot_to_add.error_message }}</div>\n                      <button type=\"button\" class=\"btn btn-primary\" @click=\"add_new_bot\">Submit</button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <>\n            </div>\n            <div class=\"card-body\">\n              <table class=\"table table-hover\">\n                <thead>\n                  <th> Bot Name</th>\n                  <th> Create time</th>\n                  <th> Operation</th>\n                </thead>\n                <tbody>\n                  <tr v-for=\"bot in bots\" :key=\"bot.id\">\n                    <td>{{ bot.botName }}</td>\n                    <td>{{ bot.createTime }}</td>\n                    <td>\n                      <button class=\"btn btn-primary\" data-bs-toggle=\"button\" style=\"margin-right: 10px;\">Edit</button>\n                      <button class=\"btn btn-danger\" data-bs-toggle=\"button\" @click=\"remove_bot(bot)\">Delete</button></td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n</template>\n  \n  \n<script>\nimport { ref, reactive } from \"vue\"\nimport $ from \"jquery\"\nimport { useStore } from \"vuex\";\nimport { Modal } from \"bootstrap/dist/js/bootstrap\";\n\n\nexport default {\n  setup() {\n    const store = useStore();\n    let bots = ref([]);\n\n    const bot_to_add = reactive ({\n      botName: \"\",\n      description: \"\",\n      content: \"\",\n      error_message: \"\",\n    })\n\n    const refresh_bots = () => {\n      $.ajax({\n        url: \"http://localhost:8888/user/bot/getall/\",\n        type: \"GET\",\n        data: {\n        },\n        headers: {\n          Authorization: \"Bearer \" + store.state.user.token\n        },\n        success(resp) {\n          bots.value = resp;\n        },\n        error(resp) {\n          console.log(resp);\n        }\n      })\n    }\n\n    refresh_bots();\n\n    const add_new_bot = () => {\n      bot_to_add.error_message = \"\";\n      $.ajax({\n        url: \"http://localhost:8888/user/bot/add/\",\n        type: \"POST\",\n        data: {\n          botName: bot_to_add.botName,\n          description: bot_to_add.description,\n          content: bot_to_add.content,\n        },\n        headers: {\n          Authorization: \"Bearer \" + store.state.user.token\n        },\n        success(resp) {\n          if(resp.error_message === \"success\") {\n            refresh_bots();\n            bot_to_add.botName = \"\";\n            bot_to_add.description = \"\";\n            bot_to_add.content= \"\";\n            Modal.getInstance(\"#add-bot-btn\").hide();\n          } else {\n            bot_to_add.error_message = resp.error_message;\n          }\n        },\n        error(resp) {\n          console.log(resp);\n        }\n      })\n    }\n\n    const remove_bot = (bot) => {\n      $.ajax({\n        url: \"http://localhost:8888/user/bot/remove/\",\n        type: \"POST\",\n        data: {\n          botId: bot.id,\n        },\n        headers: {\n          Authorization: \"Bearer \" + store.state.user.token\n        },\n        success(resp) {\n          if (resp.error_message === \"success\") {\n            refresh_bots();\n          }\n        },\n        error(resp) {\n          console.log(resp);\n        }\n      })\n    }\n\n    const modify_bot = (bot) => {\n      bot_to_add.error_message = \"\";\n      $.ajax({\n        url: \"http://localhost:8888/user/bot/add/\",\n        type: \"POST\",\n        data: {\n          botId: bot.id,\n          botName: bot_to_add.botName,\n          description: bot_to_add.description,\n          content: bot_to_add.content,\n        },\n        headers: {\n          Authorization: \"Bearer \" + store.state.user.token\n        },\n        success(resp) {\n          if(resp.error_message === \"success\") {\n            refresh_bots();\n            bot_to_add.botName = \"\";\n            bot_to_add.description = \"\";\n            bot_to_add.content= \"\";\n            Modal.getInstance(\"#modify-bot-btn\").hide();\n          } else {\n            bot_to_add.error_message = resp.error_message;\n          }\n        },\n        error(resp) {\n          console.log(resp);\n        }\n      })\n    }\n\n    return {\n      bots,\n      bot_to_add,\n      add_new_bot,\n      remove_bot,\n      modify_bot,\n    }\n  }\n}\n</script>\n\n  \n<style scoped>\ndiv.error-message {\n  color: red;\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}