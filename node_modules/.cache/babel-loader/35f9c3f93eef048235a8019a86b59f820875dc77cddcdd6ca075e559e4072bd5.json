{"ast":null,"code":"import PlayGround from \"../../components/PlayGround.vue\";\nimport { onMounted, onUnmounted } from \"vue\";\nimport { useStore } from \"vuex\";\nexport default {\n  components: {\n    PlayGround\n  },\n  setup() {\n    const store = useStore();\n    console.log();\n    const socketUrl = `ws://localhost:8888/websocket/${store.state.user.id}`;\n    let socket = null;\n    onMounted(() => {\n      socket = new WebSocket(socketUrl);\n      socket.onopen = () => {\n        console.log(\"Connected\");\n      };\n      socket.onmessage = msg => {\n        const data = JSON.parse(msg.data);\n        console.log(data);\n      };\n      socket.onclose = () => {\n        console.log(\"Connection closed\");\n      };\n    });\n    onUnmounted(() => {\n      socket.close();\n    });\n  }\n};","map":{"version":3,"names":["PlayGround","onMounted","onUnmounted","useStore","components","setup","store","console","log","socketUrl","state","user","id","socket","WebSocket","onopen","onmessage","msg","data","JSON","parse","onclose","close"],"sources":["/Users/muzhouliu/Desktop/acwing/kob/web/src/views/pk/pkIndexView.vue"],"sourcesContent":["<template>\n    <PlayGround></PlayGround>\n</template>\n\n\n<script>\nimport PlayGround from \"../../components/PlayGround.vue\"\nimport { onMounted, onUnmounted } from \"vue\"\nimport { useStore } from \"vuex\";\n\nexport default {\n    components: {\n        PlayGround\n    },\n    setup() {\n        const store = useStore();\n        console.log()\n        const socketUrl = `ws://localhost:8888/websocket/${store.state.user.id}`;\n\n        let socket = null;\n        onMounted(() => {\n            socket = new WebSocket(socketUrl);\n\n            socket.onopen = () => {\n                console.log(\"Connected\");\n            }\n\n            socket.onmessage = msg => {\n                const data = JSON.parse(msg.data);\n                console.log(data);\n            }\n\n            socket.onclose = () => {\n                console.log(\"Connection closed\");\n            }\n\n        });\n\n        onUnmounted(() => {\n            socket.close();\n        })\n    }\n\n}\n</script>\n\n\n<style scoped>\n</style>"],"mappings":"AAMA,OAAOA,UAAS,MAAO,iCAAgC;AACvD,SAASC,SAAS,EAAEC,WAAU,QAAS,KAAI;AAC3C,SAASC,QAAO,QAAS,MAAM;AAE/B,eAAe;EACXC,UAAU,EAAE;IACRJ;EACJ,CAAC;EACDK,KAAKA,CAAA,EAAG;IACJ,MAAMC,KAAI,GAAIH,QAAQ,CAAC,CAAC;IACxBI,OAAO,CAACC,GAAG,CAAC;IACZ,MAAMC,SAAQ,GAAK,iCAAgCH,KAAK,CAACI,KAAK,CAACC,IAAI,CAACC,EAAG,EAAC;IAExE,IAAIC,MAAK,GAAI,IAAI;IACjBZ,SAAS,CAAC,MAAM;MACZY,MAAK,GAAI,IAAIC,SAAS,CAACL,SAAS,CAAC;MAEjCI,MAAM,CAACE,MAAK,GAAI,MAAM;QAClBR,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;MAC5B;MAEAK,MAAM,CAACG,SAAQ,GAAIC,GAAE,IAAK;QACtB,MAAMC,IAAG,GAAIC,IAAI,CAACC,KAAK,CAACH,GAAG,CAACC,IAAI,CAAC;QACjCX,OAAO,CAACC,GAAG,CAACU,IAAI,CAAC;MACrB;MAEAL,MAAM,CAACQ,OAAM,GAAI,MAAM;QACnBd,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;MACpC;IAEJ,CAAC,CAAC;IAEFN,WAAW,CAAC,MAAM;MACdW,MAAM,CAACS,KAAK,CAAC,CAAC;IAClB,CAAC;EACL;AAEJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}