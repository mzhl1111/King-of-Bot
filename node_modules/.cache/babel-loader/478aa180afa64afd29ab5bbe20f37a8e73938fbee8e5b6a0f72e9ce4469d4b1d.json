{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { GameObject } from \"./GameObject\";\nimport { Wall } from \"./wall\";\nimport { Snake } from \"./Snake\";\nexport class GameMap extends GameObject {\n  constructor(ctx, parent) {\n    super();\n    this.ctx = ctx;\n    this.parent = parent;\n    this.L = 0;\n    this.rows = 13;\n    this.cols = 14;\n    this.walls = [];\n    this.inner_wall_count = 20;\n    this.snakes = [new Snake({\n      id: 0,\n      color: \"#4876EC\",\n      r: this.rows - 2,\n      c: 1\n    }, this), new Snake({\n      id: 1,\n      color: \"#F94848\",\n      r: 1,\n      c: this.cols - 2\n    }, this)];\n    this.eye;\n  }\n  check_connectivity(g, sx, sy, ex, ey) {\n    if (sx == ex && sy == ey) return true;\n    g[sx][sy] = true;\n    let dx = [-1, 0, 1, 0],\n      dy = [0, 1, 0, -1];\n    for (let i = 0; i < 4; i++) {\n      let x = sx + dx[i],\n        y = sy + dy[i];\n      if (!g[x][y] && this.check_connectivity(g, x, y, ex, ey)) return true;\n    }\n    return false;\n  }\n  create_walls() {\n    const g = [];\n    for (let r = 0; r < this.rows; r++) {\n      g[r] = [];\n      for (let c = 0; c < this.cols; c++) {\n        g[r][c] = false;\n      }\n    }\n\n    //add walls for surroundings \n\n    for (let r = 0; r < this.rows; r++) {\n      g[r][0] = g[r][this.cols - 1] = true;\n    }\n    for (let c = 0; c < this.cols; c++) {\n      g[0][c] = g[this.rows - 1][c] = true;\n    }\n\n    //add random walls\n    for (let i = 0; i < this.inner_wall_count; i++) {\n      for (let j = 0; j < 1000; j++) {\n        let r = parseInt(Math.random() * this.rows);\n        let c = parseInt(Math.random() * this.cols);\n        if (g[r][c] || g[this.rows - 1 - r][this.cols - 1 - c]) continue;\n        if (r == this.rows - 2 && c == 1 || r == 1 && c == this.cols - 2) continue;\n        g[r][c] = g[this.rows - 1 - r][this.cols - 1 - c] = true;\n        break;\n      }\n    }\n    const copy_g = JSON.parse(JSON.stringify(g));\n    if (!this.check_connectivity(copy_g, this.rows - 2, 1, 1, this.cols - 2)) return false;\n    for (let r = 0; r < this.rows; r++) {\n      for (let c = 0; c < this.cols; c++) {\n        if (g[r][c]) {\n          this.walls.push(new Wall(r, c, this));\n        }\n      }\n    }\n    return true;\n  }\n  add_listening_events() {\n    this.ctx.canvas.focus();\n    const [snake0, snake1] = this.snakes;\n    this.ctx.canvas.addEventListener(\"keydown\", e => {\n      if (e.key === \"w\") snake0.set_direction(0);else if (e.key === \"d\") snake0.set_direction(1);else if (e.key === \"s\") snake0.set_direction(2);else if (e.key === \"a\") snake0.set_direction(3);else if (e.key === \"ArrowUp\") snake1.set_direction(0);else if (e.key === \"ArrowRight\") snake1.set_direction(1);else if (e.key === \"ArrowDown\") snake1.set_direction(2);else if (e.key === \"ArrowLeft\") snake1.set_direction(3);\n    });\n  }\n  start() {\n    for (let i = 0; i < 1000; i++) {\n      if (this.create_walls()) break;\n    }\n    this.add_listening_events();\n  }\n  update_size() {\n    this.L = parseInt(Math.min(this.parent.clientWidth / this.cols, this.parent.clientHeight / this.rows));\n    this.ctx.canvas.width = this.L * this.cols;\n    this.ctx.canvas.height = this.L * this.rows;\n  }\n  check_ready() {\n    //judge if two snake is ready for the next round\n    for (const snake of this.snakes) {\n      if (snake.status !== \"idle\") return false;\n      if (snake.direction === -1) return false;\n    }\n    return true;\n  }\n  next_step() {\n    // let the two snake goes into next round\n    for (const snake of this.snakes) {\n      snake.next_step();\n    }\n  }\n  judge(cell) {\n    // judge if cell is a valid moving target\n    for (const wall of this.walls) {\n      if (wall.r === cell.r && wall.c === cell.c) {\n        return false;\n      }\n    }\n    for (const snake of this.snakes) {\n      let k = snake.cells.length;\n      if (!snake.check_tail_increasing()) {\n        k--;\n      }\n      for (let i = 0; i < k; i++) {\n        if (snake.cells[i].r === cell.r && snake.cells[i].c === cell.c) {\n          console.log(cell, snake.cells[i]);\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n  update() {\n    this.update_size();\n    this.render();\n    if (this.check_ready()) {\n      this.next_step();\n    }\n  }\n  render() {\n    const color_even = \"#82EAFD\",\n      color_odd = \"#02BADA\";\n    for (let r = 0; r < this.rows; r++) {\n      for (let c = 0; c < this.cols; c++) {\n        if ((r + c) % 2 == 0) {\n          this.ctx.fillStyle = color_even;\n        } else {\n          this.ctx.fillStyle = color_odd;\n        }\n        this.ctx.fillRect(c * this.L, r * this.L, this.L, this.L);\n      }\n    }\n  }\n}","map":{"version":3,"names":["GameObject","Wall","Snake","GameMap","constructor","ctx","parent","L","rows","cols","walls","inner_wall_count","snakes","id","color","r","c","eye","check_connectivity","g","sx","sy","ex","ey","dx","dy","i","x","y","create_walls","j","parseInt","Math","random","copy_g","JSON","parse","stringify","push","add_listening_events","canvas","focus","snake0","snake1","addEventListener","e","key","set_direction","start","update_size","min","clientWidth","clientHeight","width","height","check_ready","snake","status","direction","next_step","judge","cell","wall","k","cells","length","check_tail_increasing","console","log","update","render","color_even","color_odd","fillStyle","fillRect"],"sources":["/Users/muzhouliu/Desktop/acwing/kob/web/src/assets/scripts/GameMap.js"],"sourcesContent":["import { GameObject } from \"./GameObject\";\nimport { Wall } from \"./wall\";\nimport { Snake } from \"./Snake\";\n\nexport class GameMap extends GameObject {\n    constructor(ctx, parent) {\n        super();\n\n\n        this.ctx = ctx;\n        this.parent = parent;\n\n        this.L = 0;\n\n        this.rows = 13;\n        this.cols = 14;\n\n        this.walls = [];\n        this.inner_wall_count = 20;\n\n        this.snakes = [\n            new Snake({id: 0, color: \"#4876EC\", r: this.rows - 2, c: 1}, this),\n            new Snake({id: 1, color: \"#F94848\", r: 1, c: this.cols - 2}, this),\n        ];\n\n        this.eye\n    }\n\n    check_connectivity(g, sx, sy, ex, ey) {\n        if(sx == ex && sy == ey) return true;\n\n        g[sx][sy] = true;\n        let dx = [-1, 0, 1, 0], dy =[0, 1, 0, -1];\n        for (let i =0; i <4 ; i++) {\n            let x = sx + dx[i], y = sy + dy[i];\n            if(!g[x][y] && this.check_connectivity(g, x, y, ex, ey))\n                return true;\n        }\n\n        return false;\n    }\n\n\n    create_walls() {\n        const g = [];\n        for (let r = 0; r < this.rows; r++) {\n            g[r] = [];\n            for (let c = 0; c < this.cols; c++) {\n                g[r][c] = false;\n            }\n        }\n\n        //add walls for surroundings \n\n        for (let r = 0; r < this.rows; r++) {\n            g[r][0] = g[r][this.cols - 1] = true;\n        }\n\n        for (let c = 0; c < this.cols; c++) {\n            g[0][c] = g[this.rows - 1][c] = true;\n        }\n\n        //add random walls\n        for(let i = 0; i < this.inner_wall_count; i++) {\n            for (let j = 0; j < 1000; j++) {\n                let r = parseInt(Math.random() * this.rows);\n                let c = parseInt(Math.random() * this.cols);\n                if(g[r][c] || g[this.rows - 1 - r][this.cols - 1 - c]) continue;\n                if(r == this.rows - 2 && c == 1 || r == 1 && c == this.cols-2) continue;\n\n                g[r][c] = g[this.rows - 1 - r][this.cols - 1 - c] = true;\n                break;\n            }\n        }\n\n        const copy_g = JSON.parse(JSON.stringify(g));\n        if(!this.check_connectivity(copy_g, this.rows - 2, 1, 1, this.cols - 2)) return false;\n\n        for(let r = 0; r < this.rows; r++) {\n            for(let c = 0; c < this.cols; c++) {\n                if(g[r][c]) {\n                    this.walls.push(new Wall(r, c, this))\n                }\n            }\n        }\n\n        return true;\n    }\n\n\n    add_listening_events() {\n        this.ctx.canvas.focus();\n\n        const [snake0, snake1] = this.snakes;\n        this.ctx.canvas.addEventListener(\"keydown\", e => {\n            if (e.key === \"w\") snake0.set_direction(0);\n            else if (e.key === \"d\") snake0.set_direction(1);\n            else if (e.key === \"s\") snake0.set_direction(2);\n            else if (e.key === \"a\") snake0.set_direction(3);\n            else if (e.key === \"ArrowUp\") snake1.set_direction(0)\n            else if (e.key === \"ArrowRight\") snake1.set_direction(1);\n            else if (e.key === \"ArrowDown\") snake1.set_direction(2);\n            else if (e.key === \"ArrowLeft\") snake1.set_direction(3);\n        })\n    }\n\n\n    start() {\n        for(let i =0; i < 1000; i++){\n            if (this.create_walls()) break;\n        }\n\n        this.add_listening_events();\n\n    }\n\n    update_size() {\n        this.L = parseInt(Math.min(this.parent.clientWidth / this.cols, this.parent.clientHeight / this.rows));\n        this.ctx.canvas.width = this.L * this.cols;\n        this.ctx.canvas.height = this.L * this.rows;\n    }\n\n\n    check_ready() { //judge if two snake is ready for the next round\n        for (const snake of this.snakes) {\n            if (snake.status !== \"idle\") return false;\n            if (snake.direction === -1) return false;\n        }\n        return true;\n    }\n\n    next_step() { // let the two snake goes into next round\n        for (const snake of this.snakes) {\n            snake.next_step();  \n        }\n    }\n\n    judge(cell) { // judge if cell is a valid moving target\n        for (const wall of this.walls) {\n            if (wall.r === cell.r && wall.c === cell.c){\n                return false;\n            }\n        }\n\n        for (const snake of this.snakes) {\n            let k = snake.cells.length;\n            if (!snake.check_tail_increasing()) {\n                k --;\n            }\n            for (let i = 0; i < k; i++) {\n                if (snake.cells[i].r === cell.r && snake.cells[i].c === cell.c) {\n                    console.log(cell, snake.cells[i])\n                    return false;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    update() {\n        this.update_size();\n        this.render();\n        if (this.check_ready()) {\n            this.next_step();\n        }\n\n    }\n\n    render() {\n        const color_even = \"#82EAFD\", color_odd = \"#02BADA\";\n        for (let r = 0; r < this.rows; r++){\n            for (let c = 0; c < this.cols; c++) {\n                if ((r + c) % 2 == 0) {\n                    this.ctx.fillStyle = color_even;\n                } else {\n                    this.ctx.fillStyle = color_odd;\n                }\n                this.ctx.fillRect(c * this.L, r * this.L, this.L, this.L)\n            }\n        }\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}