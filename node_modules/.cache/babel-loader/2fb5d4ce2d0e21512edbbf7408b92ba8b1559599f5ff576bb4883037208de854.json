{"ast":null,"code":"import ace from 'ace-builds';\nimport { capitalize, defineComponent, markRaw, h } from 'vue';\nimport ResizeObserver from 'resize-observer-polyfill';\nconst Events = ['blur', 'input', 'change', 'changeSelectionStyle', 'changeSession', 'copy', 'focus', 'paste'];\nexport const VAceEditor = defineComponent({\n  name: 'VAceEditor',\n  props: {\n    value: {\n      type: String,\n      required: true\n    },\n    lang: {\n      type: String,\n      default: 'text'\n    },\n    theme: {\n      type: String,\n      default: 'chrome'\n    },\n    options: Object,\n    placeholder: String,\n    readonly: Boolean,\n    wrap: Boolean,\n    printMargin: {\n      type: [Boolean, Number],\n      default: true\n    },\n    minLines: Number,\n    maxLines: Number\n  },\n  emits: ['update:value', 'init', ...Events],\n  render() {\n    return h('div');\n  },\n  mounted() {\n    const editor = this._editor = markRaw(ace.edit(this.$el, {\n      placeholder: this.placeholder,\n      readOnly: this.readonly,\n      value: this.value,\n      mode: 'ace/mode/' + this.lang,\n      theme: 'ace/theme/' + this.theme,\n      wrap: this.wrap,\n      printMargin: this.printMargin,\n      useWorker: false,\n      minLines: this.minLines,\n      maxLines: this.maxLines,\n      ...this.options\n    }));\n    this._contentBackup = this.value;\n    this._isSettingContent = false;\n    editor.on('change', () => {\n      // ref: https://github.com/CarterLi/vue3-ace-editor/issues/11\n      if (this._isSettingContent) return;\n      const content = editor.getValue();\n      this._contentBackup = content;\n      this.$emit('update:value', content);\n    });\n    Events.forEach(x => {\n      const eventName = 'on' + capitalize(x);\n      if (typeof this.$.vnode.props[eventName] === 'function') {\n        editor.on(x, this.$emit.bind(this, x));\n      }\n    });\n    this._ro = new ResizeObserver(() => editor.resize());\n    this._ro.observe(this.$el);\n    this.$emit('init', editor);\n  },\n  beforeUnmount() {\n    var _a, _b;\n    (_a = this._ro) === null || _a === void 0 ? void 0 : _a.disconnect();\n    (_b = this._editor) === null || _b === void 0 ? void 0 : _b.destroy();\n  },\n  methods: {\n    focus() {\n      this._editor.focus();\n    },\n    blur() {\n      this._editor.blur();\n    },\n    selectAll() {\n      this._editor.selectAll();\n    },\n    getAceInstance() {\n      return this._editor;\n    }\n  },\n  watch: {\n    value(val) {\n      if (this._contentBackup !== val) {\n        try {\n          this._isSettingContent = true;\n          this._editor.setValue(val, 1);\n        } finally {\n          this._isSettingContent = false;\n        }\n        this._contentBackup = val;\n      }\n    },\n    theme(val) {\n      this._editor.setTheme('ace/theme/' + val);\n    },\n    options(val) {\n      this._editor.setOptions(val);\n    },\n    readonly(val) {\n      this._editor.setReadOnly(val);\n    },\n    placeholder(val) {\n      this._editor.setOption('placeholder', val);\n    },\n    wrap(val) {\n      this._editor.setWrapBehavioursEnabled(val);\n    },\n    printMargin(val) {\n      this._editor.setOption('printMargin', val);\n    },\n    lang(val) {\n      this._editor.setOption('mode', 'ace/mode/' + val);\n    },\n    minLines(val) {\n      this._editor.setOption('minLines', val);\n    },\n    maxLines(val) {\n      this._editor.setOption('maxLines', val);\n    }\n  }\n});","map":{"version":3,"names":["ace","capitalize","defineComponent","markRaw","h","ResizeObserver","Events","VAceEditor","name","props","value","type","String","required","lang","default","theme","options","Object","placeholder","readonly","Boolean","wrap","printMargin","Number","minLines","maxLines","emits","render","mounted","editor","_editor","edit","$el","readOnly","mode","useWorker","_contentBackup","_isSettingContent","on","content","getValue","$emit","forEach","x","eventName","$","vnode","bind","_ro","resize","observe","beforeUnmount","_a","disconnect","_b","destroy","methods","focus","blur","selectAll","getAceInstance","watch","val","setValue","setTheme","setOptions","setReadOnly","setOption","setWrapBehavioursEnabled"],"sources":["index.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}